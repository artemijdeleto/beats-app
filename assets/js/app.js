(function(t){function e(e){for(var s,n,r=e[0],c=e[1],u=e[2],d=0,p=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&p.push(o[n][0]),o[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,r=1;r<a.length;r++){var c=a[r];0!==o[c]&&(s=!1)}s&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},o={app:0},i=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"090b":function(t,e,a){"use strict";a.r(e),e["default"]={menu:{login:"Log in",upload:"Upload",dashboard:"Dashboard",orders:"Orders",stats:"Statistics",settings:"Settings",home:"Home",search:"Search",music:"Music",artists:"Artists"},home:{recent:"Recent releases",bestselling:"Bestselling",popular:"Popular",popularArtists:"Popular artists",recommendations:"Picked for you",categories:"Categories"},sign:{title:"Authorization",username:"Username",nickname:"Nickname",password:"Password",login:"Log in",register:"Register",create:"Create account",registered:"I've already registered"},settings:{autoplay:"Allow autoplay",darkTheme:"Dark theme",logout:"Log out"},dashboard:{audios:"My compositions",noMore:"No more compositions.."},orders:{orders:"My orders",license:"License",total:"Total",pay:"Pay",paid:"The order was successfully paid",details:"Details",download:"Download files"},explore:{results:"Search results",noMore:"No more compositions. Try to apply another filters"},audio:{general:"General",title:"Title",tempo:"Tempo",tags:"Tags",licensing:"Licensing",buy:"Buy ({price} rub.)",files:"Files",advanced:"Advanced",access:"Access parameters",delete:"Delete"},common:{loading:"Loading..",oops:"Whoops..",notFound:"Seems like this page doesn't exist..",goBack:"Go back",save:"Save",cancel:"Cancel"}}},"1fbf":function(t,e,a){},"31db":function(t,e,a){},"326a":function(t,e,a){var s={"./en":"090b","./en.js":"090b"};function o(t){return Promise.resolve().then((function(){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}var o=s[t];return a(o)}))}o.keys=function(){return Object.keys(s)},o.id="326a",t.exports=o},"4b24":function(t,e,a){"use strict";var s=a("31db"),o=a.n(s);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("99af"),a("d3b7"),a("1276"),a("c96a"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{dark:this.$root.settings.darkTheme,"menu--opened":t.menu},attrs:{id:"app"}},[a("header",[a("nav",[a("button",{staticClass:"button button--large button--accent mr-1",attrs:{id:"menu-button"},on:{click:function(e){t.menu=!t.menu}}},[a("span",{staticClass:"material-icons"},[t._v("menu")])]),a("router-link",{attrs:{to:"/",exact:""}},[a("span",{staticClass:"material-icons"},[t._v("home")]),a("span",[t._v(t._s(t.$t("menu.home")))])]),a("router-link",{attrs:{to:"/explore"}},[a("span",{staticClass:"material-icons"},[t._v("search")]),a("span",[t._v(t._s(t.$t("menu.search")))])]),a("router-link",{attrs:{to:"/explore/music"}},[a("span",{staticClass:"material-icons"},[t._v("queue_music")]),a("span",[t._v(t._s(t.$t("menu.music")))])]),a("router-link",{attrs:{to:"/explore/artists"}},[a("span",{staticClass:"material-icons"},[t._v("people")]),a("span",[t._v(t._s(t.$t("menu.artists")))])])],1)]),a("aside",{staticClass:"left"},[this.$root.user.logged?a("router-link",{staticClass:"button button--accent button--large",attrs:{to:"/audio/add"}},[a("span",{staticClass:"material-icons mr-1"},[t._v("library_add")]),a("span",[t._v(t._s(t.$t("menu.upload")))])]):a("router-link",{staticClass:"button button--accent button--large",attrs:{to:"/account/sign"}},[a("span",{staticClass:"material-icons mr-1"},[t._v("exit_to_app")]),a("span",[t._v(t._s(t.$t("menu.login")))])]),this.$root.user.logged?a("nav",[a("br"),a("br"),a("br"),a("router-link",{attrs:{to:"/account/dashboard"}},[a("span",{staticClass:"material-icons"},[t._v("queue_music")]),a("span",[t._v(t._s(t.$t("menu.dashboard")))])]),a("router-link",{attrs:{to:"/account/orders"}},[a("span",{staticClass:"material-icons"},[t._v("shopping_cart")]),a("span",[t._v(t._s(t.$t("menu.orders")))])]),a("router-link",{attrs:{to:"/account/stats"}},[a("span",{staticClass:"material-icons"},[t._v("trending_up")]),a("span",[t._v(t._s(t.$t("menu.stats")))])]),a("router-link",{attrs:{to:"/account/settings"}},[a("span",{staticClass:"material-icons"},[t._v("settings")]),a("span",[t._v(t._s(t.$t("menu.settings")))])])],1):t._e()],1),a("main",[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("router-view")],1)],1),a("aside",{staticClass:"right"},[a("Player",{ref:"player"})],1)])},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"side-player"},[a("div",{staticClass:"side-player__cover"},[a("svg",{attrs:{id:"svg",width:"200",height:"200",viewPort:"0 0 100 100",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[a("circle",{attrs:{r:"97",cx:"100",cy:"100",fill:"transparent","stroke-dasharray":"610","stroke-dashoffset":"0"}}),a("circle",{attrs:{id:"bar",r:"97",cx:"100",cy:"100",fill:"transparent","stroke-dasharray":"610","stroke-dashoffset":"610"}})]),t.playlist[t.currentTrack].cover.large?a("img",{staticClass:"side-player__img",attrs:{src:t.playlist[t.currentTrack].cover.large,alt:""}}):t._e()]),a("h1",[a("router-link",{attrs:{to:"/audio/"+t.playlist[t.currentTrack].id}},[t._v(" "+t._s(t.playlist[t.currentTrack].title)+" ")])],1),a("h4",{staticClass:"muted"},[a("router-link",{attrs:{to:"/user/"+t.playlist[t.currentTrack].user.id}},[t._v(" "+t._s(t.playlist[t.currentTrack].user.nickname)+" ")])],1),a("br"),a("div",{staticClass:"side-player__controls"},[a("button",{on:{click:function(e){return t.previous()}}},[a("span",{staticClass:"material-icons"},[t._v("skip_previous")])]),a("button",{on:{click:function(e){return t.toggle()}}},[a("span",{staticClass:"material-icons"},[t._v(t._s(t.playing?"pause":"play_arrow"))])]),a("button",{on:{click:function(e){return t.next()}}},[a("span",{staticClass:"material-icons"},[t._v("skip_next")])])])])},r=[];a("c975"),a("a9e3"),a("e25e"),a("159b");function c(t){var e=document.createElement("div");e.className="snackbar",e.innerHTML='<div class="snackbar-content">\t\t\t\t\t\t\t\t<span>'+t+"</span>\t\t\t\t\t\t\t</div>",document.body.appendChild(e),setTimeout((function(){e.parentNode.removeChild(e)}),9e3)}var u={data:function(){return{playlist:[{user:{},cover:{}}],expanded:void 0,audio:{},currentTrack:0,currentSeconds:0,durationSeconds:1,playing:!1}},computed:{currentTime:function(){return this.convertTimeHHMMSS(this.currentSeconds)},durationTime:function(){return this.convertTimeHHMMSS(this.durationSeconds)},percentComplete:function(){return parseInt(this.currentSeconds/this.durationSeconds*100)}},created:function(){var t=this;fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?sort=recent")).then((function(t){return t.json()})).then((function(e){e[0]&&(t.playlist=e,t.audio.src=e[0].mp3)})),this.expanded="true"==localStorage.getItem("player.expanded")},mounted:function(){var t=this;this.audio=document.createElement("audio"),"true"==this.$root.settings.autoplay&&(this.audio.autoplay=!0),this.audio.onended=function(){return t.next()},this.audio.onloadstart=function(e){setTimeout((function(){null!==e.target.error&&(t.playlist.length>1?(c&&c("Seems like audio not available. Switching to next.."),t.next()):c&&c("Seems like audio not available"))}),1e3)},this.audio.addEventListener("timeupdate",(function(){t.currentSeconds=parseInt(t.audio.currentTime);var e=parseInt(t.currentSeconds/t.durationSeconds*100),a=document.querySelector("#bar"),s=a.attributes.r.value,o=Math.PI*(2*s),i=(100-e)/100*o;a.style.strokeDashoffset=i})),this.audio.addEventListener("loadeddata",(function(){localStorage.getItem("backdrop"),t.durationSeconds=parseInt(t.audio.duration)})),this.audio.addEventListener("pause",(function(){t.playing=!1})),this.audio.addEventListener("play",(function(){t.playing=!0}))},methods:{isPlaying:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0==t?this.playing:this.playing&&this.playlist[this.currentTrack].id==t},play:function(t){var e=this;if(isNaN(Number(t)));else{var a=!1;if(this.playlist[this.currentTrack].id==t)return this.audio.play();this.playlist.forEach((function(s,o){if(e.playlist[o].id==t)return a=!0,e.audio.pause(),e.currentTrack=o,e.audio.src=e.playlist[e.currentTrack].mp3,void e.audio.play()})),a||fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?id=").concat(t)).then((function(t){return t.json()})).then((function(t){var a=e.playlist.push(t)-1;e.audio.pause(),e.currentTrack=a,e.audio.src=e.playlist[a].mp3,e.audio.play()}))}},convertTimeHHMMSS:function(t){var e=new Date(1e3*t).toISOString().substr(11,8);return 0===e.indexOf("00:")?e.substr(3):e},seek:function(t){var e=t.target.getBoundingClientRect(),a=(t.clientX-e.left)/e.width;this.audio.currentTime=parseInt(this.audio.duration*a)},previous:function(){var t=--this.currentTrack;void 0==this.playlist[t]&&(t=this.currentTrack=this.playlist.length-1),this.audio.pause(),this.audio.src=this.playlist[t].mp3,this.audio.play()},toggle:function(){this.audio.paused?this.audio.play():this.audio.pause()},next:function(){var t=++this.currentTrack;void 0==this.playlist[t]&&(t=this.currentTrack=0),this.audio.pause(),this.audio.src=this.playlist[t].mp3,this.audio.play()}}},l=u,d=(a("d653"),a("2877")),p=Object(d["a"])(l,n,r,!1,null,null,null),m=p.exports,h={components:{Player:m},data:function(){return{menu:!1}}},g=h,v=Object(d["a"])(g,o,i,!1,null,null,null),f=v.exports,_=a("8c4f"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",[a("h1",[a("span",{staticClass:"material-icons"},[t._v("new_releases")]),a("span",[t._v(t._s(t.$t("home.recent")))])]),t.audio.recent[0]?a("div",{staticClass:"audio-cards"},t._l(t.audio.recent,(function(e){return a("audio-card",{attrs:{audio:e,player:t.player}})})),1):a("loading",[t._v(t._s(t.$t("common.loading")))])],1),a("section",[a("h1",[a("span",{staticClass:"material-icons"},[t._v("whatshot")]),a("span",[t._v(t._s(t.$t("home.bestselling")))])]),t.audio.bestselling[0]?a("div",{staticClass:"audio-cards"},t._l(t.audio.bestselling,(function(e){return a("audio-card",{attrs:{audio:e,player:t.player}})})),1):a("loading",[t._v(t._s(t.$t("common.loading")))])],1),a("section",[a("h1",[a("span",{staticClass:"material-icons"},[t._v("whatshot")]),a("span",[t._v(t._s(t.$t("home.popular")))])]),t.audio.popular[0]?a("div",{staticClass:"audio-cards"},t._l(t.audio.popular,(function(e){return a("audio-card",{attrs:{audio:e,player:t.player}})})),1):a("loading",[t._v(t._s(t.$t("common.loading")))])],1),a("section",[a("h1",[a("span",{staticClass:"material-icons"},[t._v("whatshot")]),a("span",[t._v(t._s(t.$t("home.recommendations")))])]),t.audio.recommended[0]?a("div",{staticClass:"audio-cards"},t._l(t.audio.recommended,(function(e){return a("audio-card",{attrs:{audio:e,player:t.player}})})),1):a("loading",[t._v(t._s(t.$t("common.loading")))])],1),a("section",[a("h1",[t._v(t._s(t.$t("home.categories")))]),t.audio.categories[0]?a("div",{staticClass:"audio-grid"},t._l(t.audio.categories,(function(e){return a("section",{staticClass:"list-container"},[a("h2",[t._v(t._s(e.name))]),t._l(e.audio,(function(e){return a("audio-row",{attrs:{audio:e,player:t.player}})}))],2)})),0):a("loading",[t._v(t._s(t.$t("common.loading")))])],1),a("section",[a("h1",[a("span",{staticClass:"material-icons"},[t._v("whatshot")]),a("span",[t._v(t._s(t.$t("home.popularArtists")))])]),t._l(t.artists,(function(e){return a("router-link",{staticClass:"artist",attrs:{to:"/artist/"+e.username,tag:"div"}},[a("img",{staticClass:"artist__img",attrs:{src:e.picture,alt:""}}),a("h6",[t._v(t._s(e.nickname))])])}))],2)])},y=[],k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"audio"},[a("div",{staticClass:"audio__cover"},[t.audio.cover.medium?a("img",{staticClass:"audio__cover__img",attrs:{id:t.audio.id,src:t.audio.cover.medium}}):t._e(),a("button",{staticClass:"audio__cover__controls",on:{click:function(e){return t.play()}}},[a("span",{staticClass:"material-icons"},[t._v(" "+t._s(t.player.isPlaying(t.$options.propsData.audio.id)?"pause":"play_arrow")+" ")])])]),a("h3",[a("router-link",{staticClass:"mr-1",attrs:{to:"/audio/"+t.audio.id}},[t._v(" "+t._s(t.audio.title)+" ")]),t.$options.propsData.edit?a("router-link",{staticClass:"button button--small button--accent",attrs:{to:"/audio/"+t.audio.id+"/edit"}},[a("span",{staticClass:"material-icons"},[t._v("edit")])]):t._e()],1),t.$options.propsData.edit?t._e():a("h6",{staticClass:"muted"},[a("router-link",{attrs:{to:"/user/"+t.audio.user.id}},[t._v(" "+t._s(t.audio.user.nickname)+" ")])],1)])},C=[],$={props:{audio:Object,edit:Boolean,player:Object},methods:{play:function(){var t=this.$options.propsData;t.player.isPlaying(t.audio.id)?t.player.toggle():t.player.play(t.audio.id)}}},w=$,x=Object(d["a"])(w,k,C,!1,null,null,null),T=x.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-item"},[t.audio.cover.medium?a("img",{staticClass:"audio__cover__img",attrs:{id:t.audio.id,src:t.audio.cover.medium}}):t._e(),a("div",{staticClass:"list-item__block"},[a("h3",[a("router-link",{staticClass:"mr-1",attrs:{to:"/audio/"+t.audio.id}},[t._v(" "+t._s(t.audio.title)+" ")])],1),a("h6",[a("router-link",{attrs:{to:"/user/"+t.audio.user.id}},[t._v(" "+t._s(t.audio.user.nickname)+" ")])],1)]),a("button",{staticClass:"awesome-button",on:{click:function(e){return t.play()}}},[a("span",{staticClass:"material-icons"},[t._v(" "+t._s(t.player.isPlaying(t.$options.propsData.audio.id)?"pause":"play_arrow")+" ")])])])},S=[],O={props:{audio:Object,player:Object},methods:{play:function(){var t=this.$options.propsData;t.player.isPlaying(t.audio.id)?t.player.toggle():t.player.play(t.audio.id)}}},P=O,E=Object(d["a"])(P,j,S,!1,null,null,null),L=E.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loading"},[a("span",{staticClass:"material-icons spin mr-1"},[t._v("sync")]),a("span",[t._t("default")],2)])},M=[],D={},R=Object(d["a"])(D,A,M,!1,null,null,null),B=R.exports,N={components:{AudioCard:T,AudioRow:L,Loading:B},data:function(){return{artists:[{id:1,nickname:"Reavan",username:"reavan",picture:"assets/img/1.jpg"},{id:2,nickname:"Digital Underdog",username:"digital_underdog",picture:"assets/img/2.jpg"}],audio:{recent:[],bestselling:[],popular:[],recommended:[],categories:[]},player:{}}},created:function(){this.load()},mounted:function(){this.player=this.$root.$children[0].$refs.player},methods:{load:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?sort=popular")).then((function(t){return t.json()})).then((function(e){void 0!=e[0]&&(t.audio.popular=e)}))}}},I=N,U=Object(d["a"])(I,b,y,!1,null,null,null),H=U.exports,q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("title")]),a("h4",[t._v("artist")]),a("div",{staticClass:"platforms"},[a("figure",{staticClass:"platfrom"})])])}],J={},W=J,X=Object(d["a"])(W,q,F,!1,null,null,null),Y=X.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[a("span",{staticClass:"material-icons"},[t._v("highlight_off")]),a("span",[t._v(t._s(t.$t("common.oops")))])]),a("h4",[t._v(t._s(t.$t("common.notFound")))]),a("br"),a("router-link",{staticClass:"button button--accent button--large",attrs:{to:this.$route.meta.from}},[t._v(" "+t._s(t.$t("common.goBack"))+" ")])],1)},z=[],K={},Q=Object(d["a"])(K,G,z,!1,null,null,null),V=Q.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"beat__cover"},[a("img",{staticClass:"beat__cover__img",attrs:{src:t.audio.cover.medium}})]),a("h1",[t._v(t._s(t.audio.title))]),a("h4",{staticClass:"muted"},[t._v(t._s(t.audio.user.nickname))]),a("p",[t._v(t._s(t.$t("audio.tempo"))+": "+t._s(t.audio.tempo)+" BPM")]),a("p",[t._v(" "+t._s(t.$t("audio.tags"))+": "),t._l(t.audio.tags,(function(e,s){return[a("router-link",{attrs:{to:"/explore/beats?tags="+e}},[a("b",[t._v(t._s(e))])]),s+1<t.audio.tags.length?[t._v(", ")]:t._e()]}))],2),a("hr",{staticClass:"muted"}),a("button",{staticClass:"button button--red"},[a("span",{staticClass:"material-icons mr-1"},[t._v(" "+t._s(t.audio.likes.user_liked?"favorite_outline":"favorite")+" ")]),a("span",[t._v(t._s(t.audio.likes.count))])]),a("hr",{staticClass:"muted"}),a("br"),a("br"),a("h2",[t._v(t._s(t.$t("audio.licensing")))]),a("div",{staticClass:"grid grid-3-1"},t._l(t.audio.licenses,(function(e){return a("div",{staticClass:"license"},[a("h3",[t._v(t._s(e.name))]),a("p",{staticClass:"license__description"},[t._v(t._s(e.description))]),a("button",{staticClass:"button button--accent"},[a("span",{staticClass:"material-icons mr-1"},[t._v("shopping_cart")]),a("span",[t._v(t._s(t.$t("audio.buy",{price:e.price})))])])])})),0)])},tt=[],et=(a("96cf"),{data:function(){return{audio:{title:"",cover:{},licenses:[],user:{},likes:{count:0,user_liked:!1}}}},components:{loading:B},watch:{$route:function(t,e){this.getBeats({page:t.params.page})}},methods:{play:function(t){for(var e=t.target.id,a=this.$parent.$children[0],s=a.playlist.length-1;s>=0;s--)if(a.playlist[s].id==t.target.id)return a.audio.pause(),a.currentTrack=s,a.audio.src=a.playlist[a.currentTrack].mp3,void a.audio.play();fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?id=").concat(e)).then((function(t){return t.json()})).then((function(t){a.playlist.push(t[0]),a.audio.pause(),a.currentTrack=a.playlist.length-1,a.audio.src=t[0].mp3,a.audio.play()}))},getBeats:function(){var t,e,a,s=arguments;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},this.initialLoading||(this.loading=!0),this.nomore=!1,o.next=5,regeneratorRuntime.awrap(fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?page=").concat(t.page)));case 5:return e=o.sent,o.next=8,regeneratorRuntime.awrap(e.json());case 8:a=o.sent,void 0!=a[0]?this.beats=a:(this.beats=[],this.nomore=!0),this.loading=!1,this.initialLoading=!1;case 12:case"end":return o.stop()}}),null,this)}},created:function(){var t=this;fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?id=").concat(this.$route.params.id,"&fields=licenses")).then((function(t){return t.json()})).then((function(e){t.audio=e}))}}),at=et,st=Object(d["a"])(at,Z,tt,!1,null,null,null),ot=st.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.started?a("div",{staticClass:"progress"},[a("div",{style:{width:t.progress+"%"},attrs:{id:"progress"}})]):a("div",[a("h1",[t._v("Загрузка аудио")]),a("br"),a("div",{class:["dragbox",t.drag.focused?"dragbox--focused":""]},[a("h4",[t.drag.focused?[t._v(" Отпустите прямо сюда ")]:[a("span",{staticClass:"mr-1"},[t._v(" Перетащите файл сюда или ")]),t._m(0)]],2)])])},nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"button button--accent input_custom-file"},[a("input",{attrs:{type:"file"}}),a("span",{staticClass:"material-icons mr-1"},[t._v("create_new_folder")]),a("span",[t._v("Выберите из ПК")])])}],rt=(a("fb6a"),a("c19f"),a("ace4"),a("b0c0"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a9"),a("72f7"),{data:function(){return{drag:{focused:!1},started:!1,progress:0,file:{id:0,title:"",tempo:100,cover:{},tags:""}}},mounted:function(){var t=this,e=document.createElement("script");e.src="assets/js/id3v2.js",document.body.appendChild(e);var a=document.querySelector(".dragbox");a.ondragenter=a.ondragover=function(e){e.preventDefault(),t.drag.focused=!0},a.ondragleave=function(e){t.drag.focused=!1},a.ondrop=function(e){e.preventDefault();var a=e.dataTransfer.files[0];if(a)try{t.upload(a)}catch(s){c(s.message)}},a.onchange=function(e){e.preventDefault();var a=e.target.files[0];if(a)try{t.upload(a)}catch(s){c(s.message)}}},methods:{upload:function(t){var e=this;if(this.drag.focused=!1,-1==t.type.indexOf("audio/"))throw new Error("We accept only audio files");function a(t){for(var e=atob(t.split(",")[1]),a=t.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(e.length),o=new Uint8Array(s),i=0;i<e.length;i++)o[i]=e.charCodeAt(i);return new Blob([s],{type:a})}this.started=!0,ID3v2.parseFile(t,(function(s){s.Title?e.file.title=s.Title:e.file.title=-1==t.name.indexOf("-")?t.name.slice(0,-4):t.name.slice(t.name.indexOf("-")+2,-4),s.BPM&&(e.file.tempo=s.BPM),s.pictures[0]&&(e.file.cover.original=a(s.pictures[0].dataURL),e.file.cover.medium=s.pictures[0].dataURL)}));var s=new FormData;s.append("file[]",t);var o=new XMLHttpRequest;o.upload.onprogress=function(t){e.progress=parseInt(t.loaded/t.total*100)},o.onreadystatechange=function(t){if(4==t.target.readyState){var a={};try{a=JSON.parse(t.target.response)}catch(s){return c("We did something wrong. Try upload your beat again or open console for details"),console.log("Response:",t.target.response),void console.log(s)}a.error?c(a.error):void 0==a.id?(c("We did something wrong. Try upload your beat again or open console for details"),console.log("Response:",t.target.response)):(c("Your beat was successfully uploaded"),e.file.id=a.id,e.$route.meta.data=e.file,setTimeout((function(){e.$router.push("/beats/"+a.id+"/edit")}),1e3))}},o.open("post","".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.add?token=").concat(this.$root.user.token)),o.send(s)}}}),ct=rt,ut=(a("bbb9"),Object(d["a"])(ct,it,nt,!1,null,null,null)),lt=ut.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",[a("h1",[t._v(t._s(t.$t("audio.general")))]),a("label",{staticClass:"beat__cover upload-image"},[a("input",{attrs:{id:"cover",type:"file"},on:{change:t.image}}),a("img",{staticClass:"beat__cover__img",attrs:{src:t.audio.cover.medium,alt:""}})]),a("label",{staticClass:"form-group"},[a("span",[t._v(t._s(t.$t("audio.title")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audio.title,expression:"audio.title"}],staticClass:"form-control",attrs:{placeholder:"Near the Ocean, Fly Me to the Moon"},domProps:{value:t.audio.title},on:{input:function(e){e.target.composing||t.$set(t.audio,"title",e.target.value)}}})]),a("br"),a("label",{staticClass:"form-group"},[a("span",[t._v(t._s(t.$t("audio.tempo")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audio.tempo,expression:"audio.tempo"}],staticClass:"form-control",attrs:{placeholder:"50 – 500"},domProps:{value:t.audio.tempo},on:{input:function(e){e.target.composing||t.$set(t.audio,"tempo",e.target.value)}}}),t._v(" BPM ")]),a("br"),a("label",{staticClass:"form-group"},[a("span",[t._v(t._s(t.$t("audio.tags")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audio.tags,expression:"audio.tags"}],staticClass:"form-control",attrs:{placeholder:"fast flow, atmosphere, aggressive"},domProps:{value:t.audio.tags},on:{input:function(e){e.target.composing||t.$set(t.audio,"tags",e.target.value)}}})]),a("hr",{staticClass:"muted"}),a("br"),a("h2",[t._v(t._s(t.$t("audio.files")))]),a("hr",{staticClass:"muted"}),a("br"),a("h2",[t._v(t._s(t.$t("audio.licensing")))]),a("div",{staticClass:"grid grid-3-1"},t._l(t.audio.licenses,(function(e){return a("div",{staticClass:"license"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"license.name"}],staticClass:"button button--accent",domProps:{value:e.name},on:{input:function(a){a.target.composing||t.$set(e,"name",a.target.value)}}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"license.description"}],staticClass:"license__description",domProps:{value:e.description},on:{input:function(a){a.target.composing||t.$set(e,"description",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"license.price"}],staticClass:"button button--accent",domProps:{value:e.price},on:{input:function(a){a.target.composing||t.$set(e,"price",a.target.value)}}})])})),0),a("hr",{staticClass:"muted"}),a("br"),a("h3",[t._v(t._s(t.$t("audio.advanced")))]),a("p",[t._v(t._s(t.$t("audio.access")))]),a("button",{staticClass:"button button--red",on:{click:t.remove}},[a("span",{staticClass:"material-icons mr-1"},[t._v("delete")]),a("span",[t._v(t._s(t.$t("audio.delete")))])]),a("hr",{staticClass:"muted"}),a("button",{staticClass:"button button--large button--accent",on:{click:t.update}},[t._v(t._s(t.$t("common.save")))])])])},pt=[],mt={data:function(){return{audio:{id:0,title:"",tempo:100,tags:"",cover:{original:"",medium:""},licenses:[],price:0}}},mounted:function(){var t=this;this.$route.meta.data?(this.audio=this.$route.meta.data,this.update()):fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?id=").concat(this.$route.params.id,"&fields=contributors,licenses")).then((function(t){return t.json()})).then((function(e){return t.audio=e}));var e=document.createElement("script");e.src="assets/js/id3v2.js",document.body.appendChild(e)},methods:{image:function(t){var e=this;this.audio.cover.original=t.target.files[0];var a=new FileReader;a.onload=function(){e.audio.cover.medium=a.result},a.readAsDataURL(t.target.files[0])},update:function(){var t,e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:t=new FormData,document.getElementById("cover").files[0]&&t.append("cover",document.getElementById("cover").files[0]),t.append("title",this.audio.title),t.append("tempo",this.audio.tempo),t.append("tags",this.audio.tags),this.audio.cover.original&&t.append("cover",this.audio.cover.original),e=new XMLHttpRequest,e.onreadystatechange=function(t){if(4==t.target.readyState){var e="";try{e=JSON.parse(t.target.response)}catch(a){return c("We did something wrong. Try update your beat again or open console for details"),console.log("Response:",t.target.response),void console.log(a)}e.error?c(e.error):c("Your beat was successfully updated")}},e.open("post","".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.update?id=").concat(this.audio.id,"&token=").concat(this.$root.user.token)),e.send(t);case 10:case"end":return a.stop()}}),null,this)},remove:function(t){confirm("Are you sure?")&&(fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.delete?id=").concat(this.audio.id,"&token=").concat(this.$root.user.token)),c("".concat(this.audio.title," was successfully deleted")),this.$router.push("/beats/my"))}}},ht=mt,gt=(a("4b24"),Object(d["a"])(ht,dt,pt,!1,null,null,null)),vt=gt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v(t._s(t.$t("sign.title")))]),a("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[a("label",{staticClass:"form-group"},[a("span",[t._v(t._s(t.$t("sign.username")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),a("br"),t.login?t._e():a("label",{staticClass:"form-group"},[a("span",[t._v(t._s(t.$t("sign.nickname")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"form-control",domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})]),a("br"),a("label",{staticClass:"form-group"},[a("span",[t._v(t._s(t.$t("sign.password")))]),"checkbox"===(t.login?"password":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{change:function(e){var a=t.password,s=e.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=t._i(a,i);s.checked?n<0&&(t.password=a.concat([i])):n>-1&&(t.password=a.slice(0,n).concat(a.slice(n+1)))}else t.password=o}}}):"radio"===(t.login?"password":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"radio"},domProps:{checked:t._q(t.password,null)},on:{change:function(e){t.password=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:t.login?"password":"text"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("br"),a("br"),a("button",{staticClass:"button button--large button--accent mr-1"},[t._v(t._s(t.login?t.$t("sign.login"):t.$t("sign.register")))]),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.login=!t.login}}},[t._v(t._s(t.login?t.$t("sign.create"):t.$t("sign.registered")))])])])},_t=[];a("5319"),a("4d63"),a("25f0"),a("466d");function bt(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function yt(t,e,a){a=a||{};var s=a.expires;if("number"==typeof s&&s){var o=new Date;o.setTime(o.getTime()+1e3*s),s=a.expires=o}s&&s.toUTCString&&(a.expires=s.toUTCString()),e=encodeURIComponent(e);var i=t+"="+e;for(var n in a){i+="; "+n;var r=a[n];!0!==r&&(i+="="+r)}document.cookie=i}var kt={data:function(){return{login:!0,username:"",nickname:"",password:""}},created:function(){if(this.$root.user.logged)return this.$router.replace("/")},methods:{submit:function(t){fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/users.auth"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(this.username,"&password=").concat(this.password,"&nickname=").concat(this.nickname)}).then((function(t){return t.json()})).then((function(t){t.error||(yt("token",t.token,{expires:2592e3}),location.href="/")}))}}},Ct=kt,$t=Object(d["a"])(Ct,ft,_t,!1,null,null,null),wt=$t.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition-group",{attrs:{name:"slide-fade",mode:"out-in"}},[t.loading||t.initialLoading?a("loading",{key:"1"},[t._v(t._s(t.$t("common.loading")))]):t._e(),t.loading||void 0===t.audio[0]?t._e():a("div",{key:"2"},[a("div",[a("h2",[t._v(t._s(t.$t("dashboard.audios")))]),t._l(t.audio,(function(e){return a("audio-card",{attrs:{player:t.player,audio:e,edit:!0}})}))],2)]),t.nomore?a("div",{key:"3"},[a("p",[t._v(t._s(t.$t("dashboard.noMore")))])]):t._e(),!t.initialLoading&&t.pages>1?a("div",{key:"4",staticClass:"pagination"},[a("router-link",{attrs:{to:"/beats"}},[t._v("1")]),t._l(t.pages-1,(function(e){return a("router-link",{attrs:{to:"/beats/"+(e+1)}},[t._v(t._s(e+1))])}))],2):t._e()],1)],1)},Tt=[],jt={components:{loading:B,AudioCard:T},data:function(){return{totalBeats:0,initialLoading:!1,nomore:!1,loading:!1,pages:1,beats:[],player:{},audio:[]}},watch:{$route:function(t,e){this.getBeats({page:t.params.page})}},mounted:function(){this.player=this.$root.$children[0].$refs.player},created:function(){var t=this;fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get")).then((function(t){return t.json()})).then((function(e){t.audio=e}))},methods:{play:function(t){for(var e=t.target.id,a=this.$parent.$children[0],s=a.playlist.length-1;s>=0;s--)if(a.playlist[s].id==t.target.id)return a.audio.pause(),a.currentTrack=s,a.audio.src=a.playlist[a.currentTrack].mp3,void a.audio.play();fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?id=").concat(e)).then((function(t){return t.json()})).then((function(t){a.playlist.push(t[0]),a.audio.pause(),a.currentTrack=a.playlist.length-1,a.audio.src=t[0].mp3,a.audio.play()}))},getBeats:function(){var t,e,a,s=arguments;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},this.initialLoading||(this.loading=!0),this.nomore=!1,o.next=5,regeneratorRuntime.awrap(fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?page=").concat(t.page)));case 5:return e=o.sent,o.next=8,regeneratorRuntime.awrap(e.json());case 8:a=o.sent,void 0!=a[0]?this.beats=a:(this.beats=[],this.nomore=!0),this.loading=!1,this.initialLoading=!1;case 12:case"end":return o.stop()}}),null,this)}}},St=jt,Ot=(a("9144"),Object(d["a"])(St,xt,Tt,!1,null,null,null)),Pt=Ot.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v(t._s(t.$t("orders.orders")))]),a("div",{staticClass:"order"},[a("img",{attrs:{src:"assets/img/1.jpg",alt:""}}),a("div",{staticClass:"order__details"},[a("h4",[a("router-link",{staticClass:"message",attrs:{to:"/account/orders/132416"}},[t._v("Reavan — High Hopes (acoustic instrumental)")])],1),a("h6",[t._v(t._s(t.$t("orders.license"))+": эксклюзив")]),a("h6",[t._v(t._s(t.$t("orders.total"))+": "),a("b",[t._v("5000 руб.")])]),a("hr"),a("button",{staticClass:"button button--accent mr-1"},[t._v(t._s(t.$t("orders.pay")))]),a("button",{staticClass:"button button--red"},[t._v(t._s(t.$t("common.cancel")))])])]),a("div",{staticClass:"order"},[a("img",{attrs:{src:"assets/img/2.jpg",alt:""}}),a("div",{staticClass:"order__details"},[a("h4",[a("router-link",{staticClass:"message",attrs:{to:"/account/orders/132416"}},[t._v("Digital Underdog — Can You Distribute It?")])],1),a("h6",[t._v(t._s(t.$t("orders.license"))+": эксклюзив")]),a("h6",[t._v(t._s(t.$t("orders.total"))+": "),a("b",[t._v("5000 руб.")])]),a("hr"),a("div",{staticClass:"order__details__status order__details__status--green"},[t._m(0),a("span",{staticClass:"order__details__status__message"},[t._v(t._s(t.$t("orders.paid")))]),a("br"),a("br"),a("button",{staticClass:"button mr-1"},[t._v(t._s(t.$t("orders.details")))]),a("a",{staticClass:"button",attrs:{href:""}},[t._v(t._s(t.$t("orders.download")))])])])])])},Lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order__details__status__icon"},[a("span",{staticClass:"material-icons"},[t._v("done")])])}],At=(a("8efd"),{}),Mt=Object(d["a"])(At,Et,Lt,!1,null,null,null),Dt=Mt.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Messages")]),a("router-link",{staticClass:"message",attrs:{to:"/account/messages/reavan"}},[a("img",{attrs:{src:"assets/img/1.jpg",alt:""}}),a("h4",[t._v("Reavan")]),a("p",[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut officia voluptatem error omnis aliquid similique, tempora deserunt minus reiciendis a corrupti fugit accusantium, voluptatibus, quia quidem fugiat enim totam dolor.")])])],1)},Bt=[],Nt=(a("e335"),{}),It=Object(d["a"])(Nt,Rt,Bt,!1,null,null,null),Ut=It.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[a("h1",[t._v(t._s(t.$t("menu.settings")))]),a("br"),a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.autoplay,expression:"settings.autoplay"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.settings.autoplay)?t._i(t.settings.autoplay,null)>-1:t.settings.autoplay},on:{change:function(e){var a=t.settings.autoplay,s=e.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=t._i(a,i);s.checked?n<0&&t.$set(t.settings,"autoplay",a.concat([i])):n>-1&&t.$set(t.settings,"autoplay",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.settings,"autoplay",o)}}}),a("span",[t._v(t._s(t.$t("settings.autoplay")))])]),a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.darkTheme,expression:"settings.darkTheme"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.settings.darkTheme)?t._i(t.settings.darkTheme,null)>-1:t.settings.darkTheme},on:{change:function(e){var a=t.settings.darkTheme,s=e.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=t._i(a,i);s.checked?n<0&&t.$set(t.settings,"darkTheme",a.concat([i])):n>-1&&t.$set(t.settings,"darkTheme",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.settings,"darkTheme",o)}}}),a("span",[t._v(t._s(t.$t("settings.darkTheme")))])]),a("button",{staticClass:"button button--accent button--large mr-1",on:{click:t.save}},[t._v(t._s(t.$t("common.save")))]),a("br"),a("br"),a("router-link",{staticClass:"button",attrs:{to:"/account/logout"}},[t._v(t._s(t.$t("settings.logout")))])],1)},qt=[],Ft={data:function(){return{settings:{autoplay:!1,darkTheme:!1}}},created:function(){this.settings.autoplay="true"===localStorage.getItem("autoplay"),this.settings.darkTheme="true"===localStorage.getItem("darkTheme")},methods:{save:function(){for(var t in this.settings)localStorage.setItem(t,this.settings[t]),this.$root.settings[t]=this.settings[t]},reset:function(){var t=document.getElementById("player");t.style.left=0,t.style.top=0,localStorage.setItem("player.position.left",0),localStorage.setItem("player.position.top",0)}}},Jt=Ft,Wt=Object(d["a"])(Jt,Ht,qt,!1,null,null,null),Xt=Wt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition-group",{attrs:{name:"slide-fade",mode:"out-in"}},[t.loading||t.initialLoading?a("loading",{key:"1"},[t._v(t._s(t.$t("common.loading")))]):t._e(),t.loading||void 0==t.audio[0]?t._e():a("div",{key:"2"},[a("h1",[t._v(t._s(t.$t("explore.results")))]),a("div",{staticClass:"beats"},t._l(t.audio,(function(e){return a("audio-card",{attrs:{audio:e,player:t.player}})})),1)]),t.nomore?a("div",{key:"3"},[a("p",[t._v(t._s(t.$t("explore.noMore")))])]):t._e(),!t.initialLoading&&t.pages>1?a("div",{key:"4",staticClass:"pagination"},[a("router-link",{attrs:{to:"/beats"}},[t._v("1")]),t._l(t.pages-1,(function(e){return a("router-link",{attrs:{to:"/beats/"+(e+1)}},[t._v(t._s(e+1))])}))],2):t._e()],1)],1)},Gt=[],zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"beat"},[a("div",{staticClass:"beat__cover"},[t.audio.cover.medium?a("img",{staticClass:"beat__cover__img",attrs:{id:t.audio.id,src:t.audio.cover.medium}}):t._e(),a("button",{staticClass:"beat__cover__button",on:{click:this.$parent.$parent.play}},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])]),a("h2",[a("router-link",{staticClass:"no-underline",attrs:{to:"/beats/"+t.audio.id}},[t._v(t._s(t.audio.title))])],1),a("h4",[t._v("Tempo: "),a("b",[t._v(t._s(t.audio.bpm))]),t._v(" BPM")]),a("h6",[t._v(" Tags: "),t._l(t.audio.tags,(function(e,s){return[a("router-link",{attrs:{to:"/beats/"+e}},[a("b",[t._v(t._s(e))])]),s+1<t.audio.tags.length?[t._v(", ")]:t._e()]}))],2),a("br"),a("button",{staticClass:"button"},[t.audio.price>0?[a("span",{staticClass:"material-icons"},[t._v("shopping_cart")]),a("span",[t._v("Purchase")])]:[a("span",{staticClass:"material-icons"},[t._v("get_app")]),a("span",[t._v("Download")])]],2),a("div",{staticClass:"background",style:{backgroundImage:t.audio.cover.medium?"url("+t.audio.cover.medium+")":"linear-gradient(to left, #302b63, #654ea3)"}})])},Kt=[],Qt={props:{audio:Object}},Vt=Qt,Zt=Object(d["a"])(Vt,zt,Kt,!1,null,null,null),te=Zt.exports,ee={data:function(){return{totalBeats:0,initialLoading:!0,nomore:!1,loading:!1,pages:1,audio:[],player:{}}},components:{AudioCard:T,loading:B,Beat:te},watch:{$route:function(t,e){this.getBeats({page:t.params.page})}},mounted:function(){this.player=this.$root.$children[0].$refs.player},methods:{play:function(t){for(var e=t.target.id,a=this.$parent.$children[0],s=a.playlist.length-1;s>=0;s--)if(a.playlist[s].id==t.target.id)return a.audio.pause(),a.currentTrack=s,a.audio.src=a.playlist[a.currentTrack].mp3,void a.audio.play();fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?id=").concat(e)).then((function(t){return t.json()})).then((function(t){a.playlist.push(t[0]),a.audio.pause(),a.currentTrack=a.playlist.length-1,a.audio.src=t[0].mp3,a.audio.play()}))},getBeats:function(){var t,e,a,s=arguments;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},this.initialLoading||(this.loading=!0),this.nomore=!1,o.next=5,regeneratorRuntime.awrap(fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/audio.get?page=").concat(t.page)));case 5:return e=o.sent,o.next=8,regeneratorRuntime.awrap(e.json());case 8:a=o.sent,void 0!=a[0]?this.audio=a:(this.audio=[],this.nomore=!0),this.loading=!1,this.initialLoading=!1;case 12:case"end":return o.stop()}}),null,this)}},created:function(){var t=this;fetch("/api/beats/getData").then((function(t){return t.json()})).then((function(e){t.totalBeats=e.beats,t.pages=e.pages}));var e=this.$route.params.page;e=e>0?e:1,this.getBeats({page:e}),this.loading=!1,setTimeout((function(){void 0==t.audio[0]&&(t.loading=!0)}),500)}},ae=ee,se=(a("e5ae"),Object(d["a"])(ae,Yt,Gt,!1,null,null,null)),oe=se.exports;s["a"].use(_["a"]);var ie=new _["a"]({base:"/",linkActiveClass:"active",linkExactActiveClass:"",routes:[{path:"/",component:H,meta:{title:"menu.home"}},{path:"/preview",component:Y,meta:{title:"Preview"}},{path:"/account/sign",component:wt,meta:{title:"Авторизация"}},{path:"/account/dashboard",component:Pt,meta:{title:"menu.dashboard"}},{path:"/account/messages",component:Ut,meta:{title:"Мои сообщения"}},{path:"/account/orders",component:Dt,meta:{title:"menu.orders"}},{path:"/account/settings",component:Xt,meta:{title:"menu.settings"}},{path:"/account/logout",beforeEnter:function(t,e,a){yt("token","",{expires:-1}),location.href="/"}},{path:"/explore/music",component:oe,meta:{title:"Поиск музыки"}},{path:"/audio/:id(\\d+)?",component:ot,meta:{title:"Просмотр композиции"}},{path:"/audio/add",component:lt,meta:{title:"Uploading"}},{path:"/audio/:id(\\d+)?/edit",component:vt,meta:{title:"Редактирование"},beforeEnter:function(t,e,a){t.meta.data=e.meta.data,a()}},{path:"*",component:V,meta:{from:void 0,title:"common.oops"},beforeEnter:function(t,e,a){a(),t.meta.from=e.path}}]}),ne=a("2f62");s["a"].use(ne["a"]);var re=new ne["a"].Store({state:{user:{id:0,token:void 0,username:void 0,theme:"light"}}}),ce=(a("caad"),a("a925")),ue=a("090b");s["a"].use(ce["a"]);var le=new ce["a"]({locale:"en",fallbackLocale:"en",messages:{en:ue["default"]}});var de=le;a("6418");s["a"].config.productionTip=!1,ie.beforeEach((function(t,e,a){document.title=de.t(t.meta.title),a()})),new s["a"]({router:ie,store:re,i18n:de,data:{user:{id:0,logged:!1,token:"",username:"",nickname:"",avatar:""},settings:{darkTheme:"",autoplay:!1}},created:function(){var t=this,e=bt("token");if(e){var a=JSON.parse(atob(e.split(".")[1]));this.user.token=e,this.user.logged=!0,this.user.id=a.user.id,this.user.username=a.user.username,this.user.nickname=a.user.nickname,fetch("".concat("https://open-shop-relocatio.000webhostapp.com/music","/users.get?id=").concat(this.$root.user.id)).then((function(t){return t.json()})).then((function(e){t.user.avatar=e.avatar.small}))}this.settings.autoplay=localStorage.getItem("autoplay"),this.settings.darkTheme="true"==localStorage.getItem("darkTheme"),document.body.style.opacity=1},render:function(t){return t(f)}}).$mount("#app")},6418:function(t,e,a){},"86ae":function(t,e,a){},"8efd":function(t,e,a){"use strict";var s=a("ceeb"),o=a.n(s);o.a},9144:function(t,e,a){"use strict";var s=a("1fbf"),o=a.n(s);o.a},ad6b:function(t,e,a){},aff0:function(t,e,a){},bbb9:function(t,e,a){"use strict";var s=a("ff07"),o=a.n(s);o.a},ceeb:function(t,e,a){},d653:function(t,e,a){"use strict";var s=a("ad6b"),o=a.n(s);o.a},e335:function(t,e,a){"use strict";var s=a("86ae"),o=a.n(s);o.a},e5ae:function(t,e,a){"use strict";var s=a("aff0"),o=a.n(s);o.a},ff07:function(t,e,a){}});