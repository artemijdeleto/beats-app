(function(t){function e(e){for(var s,i,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)i=o[d],r[i]&&p.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},r={app:0},n=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0600":function(t,e,a){},"15a7":function(t,e,a){},"2b56":function(t,e,a){"use strict";var s=a("fad1"),r=a.n(s);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("6762"),a("2fdb"),a("a481"),a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{dark:"dark"==this.$root.user.theme},attrs:{id:"app"}},[a("aside",{staticClass:"left"},[this.$root.user.logged?a("router-link",{staticClass:"cool-button",attrs:{to:"/upload"}},[a("span",{staticClass:"material-icons"},[t._v("library_add")]),a("span",[t._v("Загрузить бит")])]):a("button",{staticClass:"cool-button",on:{click:t.auth}},[a("span",{staticClass:"material-icons"},[t._v("exit_to_app")]),a("span",[t._v("Войти")])]),a("br"),a("br"),a("br"),this.$root.user.logged?a("nav",[a("router-link",{attrs:{to:"/"}},[a("span",{staticClass:"material-icons"},[t._v("mail_outline")]),a("span",[t._v("Сообщения")])]),a("router-link",{attrs:{to:"/account/beats"}},[a("span",{staticClass:"material-icons"},[t._v("queue_music")]),a("span",[t._v("Мои биты")])]),a("router-link",{attrs:{to:"/account/stats"}},[a("span",{staticClass:"material-icons"},[t._v("trending_up")]),a("span",[t._v("Статистика")])]),a("router-link",{attrs:{to:"/account/settings"}},[a("span",{staticClass:"material-icons"},[t._v("settings")]),a("span",[t._v("Настройки")])])],1):t._e()],1),a("header",[a("nav",[a("router-link",{attrs:{to:"/",exact:""}},[a("span",{staticClass:"material-icons"},[t._v("home")]),a("span",[t._v("Главная")])]),a("router-link",{attrs:{to:"/explore"}},[a("span",{staticClass:"material-icons"},[t._v("search")]),a("span",[t._v("Поиск")])]),a("router-link",{attrs:{to:"/explore/beats"}},[a("span",{staticClass:"material-icons"},[t._v("queue_music")]),a("span",[t._v("Каталог")])]),a("router-link",{attrs:{to:"/explore/beatmakers"}},[a("span",{staticClass:"material-icons"},[t._v("people")]),a("span",[t._v("Битмейкеры")])])],1)]),a("main",[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("router-view")],1)],1),a("aside",{staticClass:"right"},[this.$root.user.logged?a("div",{staticClass:"side-profile"},[a("img",{staticClass:"side-profile__img",attrs:{src:this.$root.user.avatar,alt:""}}),a("br"),a("h5",[t._v(t._s(this.$root.user.nickname))]),t._m(0)]):t._e(),a("Player")],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"side-profile__stats"},[a("h6",[a("span",{staticClass:"material-icons"},[t._v("people")]),a("span",[t._v("Followers   "),a("b",[t._v("250")])])])])}],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"side-player"},[a("div",{staticClass:"side-player__cover"},[a("div",{staticClass:"side-player__progress"}),t.playlist[t.currentTrack].cover.large?a("img",{staticClass:"side-player__img",attrs:{src:t.playlist[t.currentTrack].cover.large,alt:""}}):t._e()]),a("br"),a("br"),a("h5",[t._v(t._s(t.playlist[t.currentTrack].title))]),a("h6",{staticClass:"muted"},[t._v(t._s(t.playlist[t.currentTrack].author.name))]),a("br"),a("div",{staticClass:"side-player__controls"},[a("button",{attrs:{id:"previous"},on:{click:function(e){return t.previous()}}},[a("span",{staticClass:"material-icons"},[t._v("skip_previous")])]),a("button",{attrs:{id:"play"},on:{click:function(e){return t.toggle()}}},[a("span",{staticClass:"material-icons"},[t._v(t._s(t.playing?"pause":"play_arrow"))])]),a("button",{attrs:{id:"next"},on:{click:function(e){return t.next()}}},[a("span",{staticClass:"material-icons"},[t._v("skip_next")])])])])},o=[],c=a("e814"),l=a.n(c),u=(a("c64d"),{data:function(){return{playlist:[{author:{},cover:{}}],expanded:void 0,audio:{},currentTrack:0,currentSeconds:0,durationSeconds:1,playing:!1}},computed:{currentTime:function(){return this.convertTimeHHMMSS(this.currentSeconds)},durationTime:function(){return this.convertTimeHHMMSS(this.durationSeconds)},percentComplete:function(){return l()(this.currentSeconds/this.durationSeconds*100)}},created:function(){var t=this;fetch("http://api.beats.com/beats.get?sort=recent").then(function(t){return t.json()}).then(function(e){t.playlist=e,t.audio.src=e[0].mp3}),this.expanded="true"==localStorage.getItem("player.expanded")},mounted:function(){var t=this;this.audio=document.createElement("audio"),"true"===localStorage.getItem("autoplay")&&(this.audio.autoplay=!0),this.audio.onended=function(){return t.next()},this.audio.onloadstart=function(e){setTimeout(function(){null!==e.target.error&&(t.playlist.length>1?(Snackbar&&Snackbar("Seems like audio not available. Switching to next.."),t.next()):Snackbar&&Snackbar("Seems like audio not available"))},1e3)},this.audio.addEventListener("timeupdate",function(){t.currentSeconds=l()(t.audio.currentTime)}),this.audio.addEventListener("loadeddata",function(){if("true"==localStorage.getItem("backdrop")){var e=t.playlist[t.currentTrack].cover.large?"url("+t.playlist[t.currentTrack].cover.large+")":"";document.querySelector(".side-player").style.backgroundImage=e,document.querySelector(".side-player").style.backgroundSize="cover",document.querySelector(".side-player").style.backgroundPosition="center"}t.durationSeconds=l()(t.audio.duration)}),this.audio.addEventListener("pause",function(){t.playing=!1}),this.audio.addEventListener("play",function(){t.playing=!0})},methods:{convertTimeHHMMSS:function(t){var e=new Date(1e3*t).toISOString().substr(11,8);return 0===e.indexOf("00:")?e.substr(3):e},expand:function(){this.expanded=!this.expanded,localStorage.setItem("player.expanded",this.expanded)},seek:function(t){var e=t.target.getBoundingClientRect(),a=(t.clientX-e.left)/e.width;this.audio.currentTime=l()(this.audio.duration*a)},previous:function(){var t=--this.currentTrack;void 0==this.playlist[t]&&(t=this.currentTrack=this.playlist.length-1),this.audio.pause(),this.audio.src=this.playlist[t].mp3,this.audio.play()},toggle:function(){this.audio.paused?this.audio.play():this.audio.pause()},next:function(){var t=++this.currentTrack;void 0==this.playlist[t]&&(t=this.currentTrack=0),this.audio.pause(),this.audio.src=this.playlist[t].mp3,this.audio.play()}}}),d=u,p=a("2877"),m=Object(p["a"])(d,i,o,!1,null,null,null),v=m.exports,h={components:{Player:v},methods:{auth:function(){location.href="https://oauth.vk.com/authorize?client_id=6889073&redirect_uri=http://beats.com&response_type=token"}}},_=h,f=Object(p["a"])(_,r,n,!1,null,null,null),g=f.exports,b=a("8c4f"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("Type your credentials to get access for the features")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[a("label",{staticClass:"form-group"},[a("span",[t._v("Имя пользователя")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),a("br"),a("label",{staticClass:"form-group"},[a("span",[t._v("Пароль")]),"checkbox"===(t.login?"password":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{change:function(e){var a=t.password,s=e.target,r=!!s.checked;if(Array.isArray(a)){var n=null,i=t._i(a,n);s.checked?i<0&&(t.password=a.concat([n])):i>-1&&(t.password=a.slice(0,i).concat(a.slice(i+1)))}else t.password=r}}}):"radio"===(t.login?"password":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"radio"},domProps:{checked:t._q(t.password,null)},on:{change:function(e){t.password=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:t.login?"password":"text"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("br"),a("button",{staticClass:"cool-button"},[t._v(t._s(t.login?"Войти":"Зарегистрироваться"))]),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.login=!t.login}}},[t._v(t._s(t.login?"У меня нет аккаунта":"Я уже зарегистрирован"))])])])},k=[],C={data:function(){return{login:!0,username:void 0,password:void 0}},created:function(){if(this.$root.user.logged)return this.$router.replace("/")},methods:{submit:function(t){var e=this;fetch("http://api.beats.com/auth",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username=".concat(this.username,"&password=").concat(this.password,"&act=")+(this.login?"signin":"signup")}).then(function(t){return t.json()}).then(function(t){t.error||(e.$root.user.logged=!0,localStorage.setItem("token",t.token),e.$router.push("/"))})}}},w=C,S=Object(p["a"])(w,y,k,!1,null,null,null),x=S.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"cards-container"},[t._m(0),t._l(t.beats,function(e){return a("div",{staticClass:"track"},[a("div",{staticClass:"track__cover"},[e.cover.medium?a("img",{staticClass:"track__cover__img",attrs:{id:e.id,src:e.cover.medium,alt:""}}):t._e(),t._m(1,!0)]),a("h5",[a("router-link",{attrs:{to:"/beats/"+e.id}},[t._v(t._s(e.title))])],1),a("h6",{staticClass:"muted"},[a("router-link",{attrs:{to:"/user/"+e.author.id}},[t._v(t._s(e.author.name))])],1)])})],2),t._m(2),t._m(3),t._m(4)])},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[a("span",{staticClass:"material-icons"},[t._v("whatshot")]),a("span",[t._v("Самые продаваемые биты")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"track__cover__controls"},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"cards-container"},[a("h1",[a("span",{staticClass:"material-icons"},[t._v("whatshot")]),a("span",[t._v("Популярные биты")])]),a("div",{staticClass:"track"},[a("div",{staticClass:"track__cover"},[a("img",{staticClass:"track__cover__img",attrs:{src:"assets/img/1.jpg",alt:""}}),a("button",{staticClass:"track__cover__controls"},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])]),a("h5",[a("a",{attrs:{href:"/"}},[t._v("Lorde — Melodrama")])]),a("h6",{staticClass:"muted"},[t._v("Pop music")])]),a("div",{staticClass:"track"},[a("div",{staticClass:"track__cover"},[a("img",{staticClass:"track__cover__img",attrs:{src:"assets/img/2.jpg",alt:""}}),a("button",{staticClass:"track__cover__controls"},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])]),a("h5",[a("a",{attrs:{href:"/"}},[t._v("High hopes")])]),a("h6",{staticClass:"muted"},[t._v("140 BPM")])]),a("div",{staticClass:"track"},[a("div",{staticClass:"track__cover"},[a("img",{staticClass:"track__cover__img",attrs:{src:"assets/img/3.jpg",alt:""}}),a("button",{staticClass:"track__cover__controls"},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])]),a("h5",[a("a",{attrs:{href:"/"}},[t._v("Lorde — Melodrama")])]),a("h6",{staticClass:"muted"},[t._v("Pop music")])]),a("div",{staticClass:"track"},[a("div",{staticClass:"track__cover"},[a("img",{staticClass:"track__cover__img",attrs:{src:"assets/img/4.jpg",alt:""}}),a("button",{staticClass:"track__cover__controls"},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])]),a("h5",[a("a",{attrs:{href:"/"}},[t._v("High hopes")])]),a("h6",{staticClass:"muted"},[t._v("140 BPM")])]),a("div",{staticClass:"track"},[a("div",{staticClass:"track__cover"},[a("img",{staticClass:"track__cover__img",attrs:{src:"assets/img/6.jpg",alt:""}}),a("button",{staticClass:"track__cover__controls"},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])]),a("h5",[a("a",{attrs:{href:"/"}},[t._v("High hopes")])]),a("h6",{staticClass:"muted"},[t._v("140 BPM")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid grid-4-4"},[a("section",{staticClass:"list-container"},[a("h1",[t._v("Атмосферные")]),a("div",{staticClass:"list-item"},[a("img",{attrs:{src:"assets/img/1.jpg",alt:""}}),a("div",{staticClass:"list-item__block"},[a("h3",[t._v("Travis Scott type beat")]),a("h6",[t._v("Chris Stapleton")])]),a("button",{staticClass:"awesome-button"},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])]),a("div",{staticClass:"list-item"},[a("img",{attrs:{src:"assets/img/1.jpg",alt:""}}),a("div",{staticClass:"list-item__block"},[a("h3",[t._v("Travis Scott type beat")]),a("h6",[t._v("Chris Stapleton")])]),a("button",{staticClass:"awesome-button"},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])])]),a("section",{staticClass:"list-container"},[a("h1",[t._v("Классные")]),a("div",{staticClass:"list-item"},[a("img",{attrs:{src:"assets/img/1.jpg",alt:""}}),a("div",{staticClass:"list-item__block"},[a("h3",[t._v("Travis Scott type beat")]),a("h6",[t._v("Chris Stapleton")])]),a("button",{staticClass:"awesome-button"},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])])]),a("section",{staticClass:"list-container"},[a("h1",[t._v("Классные")]),a("div",{staticClass:"list-item"},[a("img",{attrs:{src:"assets/img/1.jpg",alt:""}}),a("div",{staticClass:"list-item__block"},[a("h3",[t._v("Travis Scott type beat")]),a("h6",[t._v("Chris Stapleton")])]),a("button",{staticClass:"awesome-button"},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"cards-container"},[a("h1",[a("span",{staticClass:"material-icons"},[t._v("whatshot")]),a("span",[t._v("Топовые битмейкеры")])]),a("div",{staticClass:"artist"},[a("img",{staticClass:"artist__img",attrs:{src:"assets/img/1.jpg",alt:""}}),a("h5",[a("a",{attrs:{href:"/"}},[t._v("Reavan")])])]),a("div",{staticClass:"artist"},[a("img",{staticClass:"artist__img",attrs:{src:"assets/img/2.jpg",alt:""}}),a("h5",[a("a",{attrs:{href:"/"}},[t._v("High hopes")])]),a("h6",{staticClass:"muted"},[t._v("140 BPM")])])])}],E=(a("96cf"),a("3b8d")),j={data:function(){return{beats:[]}},created:function(){this.getBeats()},methods:{getBeats:function(){var t=Object(E["a"])(regeneratorRuntime.mark(function t(){var e,a,s,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,fetch("http://api.beats.com/beats.get?page=".concat(e.page));case 3:return a=t.sent,t.next=6,a.json();case 6:s=t.sent,void 0!=s[0]?this.beats=s:this.beats=[];case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},O=j,P=Object(p["a"])(O,T,$,!1,null,null,null),B=P.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition-group",{attrs:{name:"slide-fade",mode:"out-in"}},[t.loading||t.initialLoading?a("loading",{key:"1"},[t._v("Waiting for beats..")]):t._e(),t.loading||void 0==t.beats[0]?t._e():a("div",{key:"2"},[a("div",{staticClass:"beats"},t._l(t.beats,function(t,e){return a("Beat",{key:e,attrs:{beat:t}})}),1)]),t.nomore?a("div",{key:"3"},[a("p",[t._v("Sorry, there's no more beats..")])]):t._e(),!t.initialLoading&&t.pages>1?a("div",{key:"4",staticClass:"pagination"},[a("router-link",{attrs:{to:"/beats"}},[t._v("1")]),t._l(t.pages-1,function(e){return a("router-link",{attrs:{to:"/beats/"+(e+1)}},[t._v(t._s(e+1))])})],2):t._e()],1)],1)},I=[],L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loading"},[a("span",{staticClass:"material-icons spin"},[t._v("sync")]),a("span",[t._t("default")],2)])},A=[],N={},R=Object(p["a"])(N,L,A,!1,null,null,null),D=R.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"beat"},[a("div",{staticClass:"beat__cover"},[t.beat.cover.medium?a("img",{staticClass:"beat__cover__img",attrs:{id:t.beat.id,src:t.beat.cover.medium}}):t._e(),a("button",{staticClass:"beat__cover__button",on:{click:this.$parent.$parent.play}},[a("span",{staticClass:"material-icons"},[t._v("play_arrow")])])]),a("h2",[a("router-link",{staticClass:"no-underline",attrs:{to:"/beats/"+t.beat.id}},[t._v(t._s(t.beat.title))])],1),a("h4",[t._v("Tempo: "),a("b",[t._v(t._s(t.beat.bpm))]),t._v(" BPM")]),a("h6",[t._v("\n\t\tTags:\n\t\t"),t._l(t.beat.tags,function(e,s){return[a("router-link",{attrs:{to:"/beats/"+e}},[a("b",[t._v(t._s(e))])]),s+1<t.beat.tags.length?[t._v(", ")]:t._e()]})],2),a("br"),a("button",{staticClass:"button"},[t.beat.price>0?[a("span",{staticClass:"material-icons"},[t._v("shopping_cart")]),a("span",[t._v("Purchase")])]:[a("span",{staticClass:"material-icons"},[t._v("get_app")]),a("span",[t._v("Download")])]],2),a("div",{staticClass:"background",style:{backgroundImage:t.beat.cover.medium?"url("+t.beat.cover.medium+")":"linear-gradient(to left, #302b63, #654ea3)"}})])},q=[],W={props:{beat:Object}},Y=W,F=Object(p["a"])(Y,H,q,!1,null,null,null),J=F.exports,G={data:function(){return{totalBeats:0,initialLoading:!0,nomore:!1,loading:!1,pages:1,beats:[]}},components:{loading:D,Beat:J},watch:{$route:function(t,e){this.getBeats({page:t.params.page})}},methods:{play:function(t){for(var e=t.target.id,a=this.$parent.$children[0],s=a.playlist.length-1;s>=0;s--)if(a.playlist[s].id==t.target.id)return a.audio.pause(),a.currentTrack=s,a.audio.src=a.playlist[a.currentTrack].mp3,void a.audio.play();fetch("http://api.beats.com/beats.get?id=".concat(e)).then(function(t){return t.json()}).then(function(t){a.playlist.push(t[0]),a.audio.pause(),a.currentTrack=a.playlist.length-1,a.audio.src=t[0].mp3,a.audio.play()})},getBeats:function(){var t=Object(E["a"])(regeneratorRuntime.mark(function t(){var e,a,s,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},this.initialLoading||(this.loading=!0),this.nomore=!1,t.next=5,fetch("http://api.beats.com/beats.get?page=".concat(e.page));case 5:return a=t.sent,t.next=8,a.json();case 8:s=t.sent,void 0!=s[0]?this.beats=s:(this.beats=[],this.nomore=!0),this.loading=!1,this.initialLoading=!1;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=this;fetch("/api/beats/getData").then(function(t){return t.json()}).then(function(e){t.totalBeats=e.beats,t.pages=e.pages});var e=this.$route.params.page;e=e>0?e:1,this.getBeats({page:e}),this.loading=!1,setTimeout(function(){void 0==t.beats[0]&&(t.loading=!0)},500)}},X=G,z=(a("5de3"),Object(p["a"])(X,M,I,!1,null,null,null)),U=z.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",[a("label",{staticClass:"upload-image"},[a("input",{attrs:{id:"cover",type:"file"},on:{change:t.image}}),a("img",{attrs:{src:t.file.cover.medium,alt:""}})]),a("div",[a("table",[a("tr",[t._m(0),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.file.title,expression:"file.title"}],staticClass:"input",attrs:{id:"title"},domProps:{value:t.file.title},on:{input:function(e){e.target.composing||t.$set(t.file,"title",e.target.value)}}})])]),t._m(1),a("tr",[t._m(2),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.file.bpm,expression:"file.bpm"}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.file.bpm},on:{input:function(e){e.target.composing||t.$set(t.file,"bpm",e.target.value)}}}),t._v(" bpm\n\t\t\t\t")])]),a("tr",[t._m(3),a("td",[a("span",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.file.genre,expression:"file.genre"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.file,"genre",e.target.multiple?a:a[0])}}},t._l(t.categories,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}),0)])])]),a("tr",[t._m(4),a("td",[a("span",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.file.mood,expression:"file.mood"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.file,"mood",e.target.multiple?a:a[0])}}},t._l(t.moods,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}),0)])])]),t._m(5),a("tr",[t._m(6),a("td",[t._v("\n\t\t\t\t\t$"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.file.price,expression:"file.price"}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.file.price},on:{input:function(e){e.target.composing||t.$set(t.file,"price",e.target.value)}}})])])]),a("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:function(e){return t.update()}}},[t._v("Save")]),a("button",{staticClass:"button error indent",attrs:{type:"button"},on:{click:function(e){return t.remove()}}},[t._v("Delete")])])]),a("br"),t._m(7)])},Q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",[t._v("TITLE")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("label",[t._v("TYPE")])]),a("td",[a("span",{staticClass:"select"},[a("select",[a("option",[t._v("Beat")]),a("option",[t._v("Track")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",[t._v("TEMPO")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",[t._v("CATEGORY")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",[t._v("MOOD")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("label",[t._v("TAGS")])]),a("td",[a("input",{attrs:{placeholder:"fast flow, various flows"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",[t._v("PRICE")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[a("h1",[t._v("Основное")]),a("div",{staticClass:"beat__cover"},[a("img",{staticClass:"beat__cover__img",attrs:{src:"/assets/img/1.jpg",alt:""}})]),a("label",{staticClass:"form-group"},[a("span",[t._v("Название")]),a("input",{staticClass:"form-control",attrs:{placeholder:"Near the Ocean, Fly Me to the Moon"}})]),a("label",{staticClass:"form-group"},[a("span",[t._v("Темп")]),a("input",{staticClass:"form-control",attrs:{placeholder:"50 – 500"}}),t._v("   BPM\n\t\t")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("hr",{staticClass:"muted"}),a("br"),a("h3",[t._v("Лицензирование")]),a("p",[t._v("Цена")]),a("p",{staticClass:"muted"},[t._v("(дальше если цена указана)")]),a("p",[t._v("Тип лицензии")]),a("hr",{staticClass:"muted"}),a("br"),a("h3",[t._v("Дополнительно")]),a("p",[t._v("Параметры доступа")]),a("button",{staticClass:"cool-button",staticStyle:{background:"firebrick"}},[t._v("Удалить бит")]),a("hr",{staticClass:"muted"}),a("button",{staticClass:"cool-button"},[t._v("Сохранить")])])}],V={data:function(){return{file:{id:0,title:"",bpm:100,cover:{medium:""},price:0,genre:0,mood:0},categories:[{id:0,name:"Category"}],moods:[{id:0,name:"Mood"}]}},created:function(){var t=this;this.$route.meta.data?(console.log("You came here after uploading a file"),this.file=this.$route.meta.data):(console.log("You came here NOT after uploading a file"),fetch("http://api.beats.com/beats.get?id="+this.$route.params.id).then(function(t){return t.json()}).then(function(e){return t.file=e})),fetch("http://api.beats.com/categories.get").then(function(t){return t.json()}).then(function(e){return t.categories=e}),fetch("http://api.beats.com/moods.get").then(function(t){return t.json()}).then(function(e){return t.moods=e})},methods:{image:function(t){console.log(t)},update:function(){var t=new FormData;document.getElementById("cover").files[0]&&t.append("cover",document.getElementById("cover").files[0]),t.append("title",this.file.title),t.append("bpm",this.file.bpm),t.append("price",this.file.price),t.append("category",this.file.genre),t.append("mood",this.file.mood);var e=new XMLHttpRequest;e.onreadystatechange=function(t){if(4==t.target.readyState){var e="";try{e=JSON.parse(t.target.response)}catch(a){return Snackbar("We did something wrong. Try upload your beat again or open console for details"),console.log("Response:",t.target.response),void console.log(a)}e.error?Snackbar(e.error):Snackbar("Your beat was successfully uploaded")}},e.open("post","http://api.beats.com/beats.update?id="+this.file.id+"&token=1"),e.send(t)},remove:function(){console.log(ev)}}},Z=V,tt=(a("d572"),Object(p["a"])(Z,K,Q,!1,null,null,null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",[a("h1",[t._v("Настройки")]),a("br"),a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.autoplay,expression:"autoplay"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.autoplay)?t._i(t.autoplay,null)>-1:t.autoplay},on:{change:function(e){var a=t.autoplay,s=e.target,r=!!s.checked;if(Array.isArray(a)){var n=null,i=t._i(a,n);s.checked?i<0&&(t.autoplay=a.concat([n])):i>-1&&(t.autoplay=a.slice(0,i).concat(a.slice(i+1)))}else t.autoplay=r}}}),a("span",[t._v("Автовоспроизведение")])]),a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.darkTheme,expression:"darkTheme"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.darkTheme)?t._i(t.darkTheme,null)>-1:t.darkTheme},on:{change:function(e){var a=t.darkTheme,s=e.target,r=!!s.checked;if(Array.isArray(a)){var n=null,i=t._i(a,n);s.checked?i<0&&(t.darkTheme=a.concat([n])):i>-1&&(t.darkTheme=a.slice(0,i).concat(a.slice(i+1)))}else t.darkTheme=r}}}),a("span",[t._v("Тёмная тема")])]),a("button",{staticClass:"cool-button"},[t._v("Сохранить")])])},st=[],rt={data:function(){return{backdrop:!1,autoplay:!1,darkTheme:!1}},watch:{backdrop:function(t){localStorage.setItem("backdrop",t)},autoplay:function(t){localStorage.setItem("autoplay",t)},darkTheme:function(t){localStorage.setItem("darkTheme",t)}},created:function(){console.log(this),this.backdrop="true"===localStorage.getItem("backdrop"),this.autoplay="true"===localStorage.getItem("autoplay"),this.darkTheme="true"===localStorage.getItem("darkTheme")},methods:{reset:function(){var t=document.getElementById("player");t.style.left=0,t.style.top=0,localStorage.setItem("player.position.left",0),localStorage.setItem("player.position.top",0)}}},nt=rt,it=Object(p["a"])(nt,at,st,!1,null,null,null),ot=it.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition-group",{attrs:{name:"slide-fade",mode:"out-in"}},[t.loading||t.initialLoading?a("loading",{key:"1"},[t._v("Waiting for beats..")]):t._e(),t.loading||void 0==t.beats[0]?t._e():a("div",{key:"2"},[a("div",{staticClass:"dashboard"},t._l(t.beats,function(e,s){return a("router-link",{key:s,staticClass:"beat",attrs:{to:"/beats/"+e.id+"/edit"}},[e.cover.medium?a("img",{staticClass:"cover",attrs:{id:e.id,src:e.cover.medium},on:{click:function(e){return e.preventDefault(),t.play(e)}}}):t._e(),a("h1",[t._v(t._s(e.title))]),a("div",{staticClass:"background",style:{backgroundImage:e.cover.medium?"url("+e.cover.medium+")":"linear-gradient(to left, #302b63, #654ea3)"}})])}),1)]),t.nomore?a("div",{key:"3"},[a("p",[t._v("Sorry, there's no more beats..")])]):t._e(),!t.initialLoading&&t.pages>1?a("div",{key:"4",staticClass:"pagination"},[a("router-link",{attrs:{to:"/beats"}},[t._v("1")]),t._l(t.pages-1,function(e){return a("router-link",{attrs:{to:"/beats/"+(e+1)}},[t._v(t._s(e+1))])})],2):t._e()],1)],1)},lt=[],ut={data:function(){return{totalBeats:0,initialLoading:!1,nomore:!1,loading:!1,pages:1,beats:[{cover:{}}]}},components:{loading:D},watch:{$route:function(t,e){this.getBeats({page:t.params.page})}},methods:{play:function(t){for(var e=t.target.id,a=this.$parent.$children[0],s=a.playlist.length-1;s>=0;s--)if(a.playlist[s].id==t.target.id)return a.audio.pause(),a.currentTrack=s,a.audio.src=a.playlist[a.currentTrack].mp3,void a.audio.play();fetch("http://api.beats.com/beats.get?id=".concat(e)).then(function(t){return t.json()}).then(function(t){a.playlist.push(t[0]),a.audio.pause(),a.currentTrack=a.playlist.length-1,a.audio.src=t[0].mp3,a.audio.play()})},getBeats:function(){var t=Object(E["a"])(regeneratorRuntime.mark(function t(){var e,a,s,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},this.initialLoading||(this.loading=!0),this.nomore=!1,t.next=5,fetch("http://api.beats.com/beats.get?page=".concat(e.page));case 5:return a=t.sent,t.next=8,a.json();case 8:s=t.sent,void 0!=s[0]?this.beats=s:(this.beats=[],this.nomore=!0),this.loading=!1,this.initialLoading=!1;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=this;fetch("http://api.beats.com/beats.info").then(function(t){return t.json()}).then(function(e){t.totalBeats=e.total,t.pages=e.pages});var e=this.$route.params.page;e=e>0?e:1,this.getBeats({page:e}),this.loading=!1,setTimeout(function(){void 0==t.beats[0]&&(t.loading=!0)},500)}},dt=ut,pt=(a("2b56"),Object(p["a"])(dt,ct,lt,!1,null,null,null)),mt=pt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.started?a("div",{staticClass:"progress"},[a("div",{style:{width:t.file.progress+"%"},attrs:{id:"progress"}})]):a("div",{attrs:{id:"dragbox"}},[t._m(0)])},ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",[a("span",[t._v("Drag your audio file right here or")]),t._v("\n\t\t\t \n\t\t\t"),a("button",{staticClass:"cool-button input_custom-file"},[a("label",[a("input",{attrs:{type:"file"}}),a("span",[t._v("Browse your PC")])])])])}],_t=(a("7f7f"),{data:function(){return{started:!1,file:{id:0,title:"",bpm:100,cover:{},progress:0}}},mounted:function(){var t=this,e=document.getElementById("dragbox");e.ondragenter=e.ondragover=function(t){t.preventDefault()},e.ondrop=function(e){e.preventDefault();var a=e.dataTransfer.files[0];if(a)try{t.upload(a)}catch(s){Snackbar(s.message)}},e.onchange=function(e){e.preventDefault();var a=e.target.files[0];if(a)try{t.upload(a)}catch(s){Snackbar(s.message)}}},methods:{upload:function(t){var e=this;if(-1==t.type.indexOf("audio/"))throw new Error("We accept only audio files");ID3v2.parseFile(t,function(a){a.Title?e.file.title=a.Title:e.file.title=-1==t.name.indexOf("-")?t.name.slice(0,-4):t.name.slice(t.name.indexOf("-")+2,-4),a.BPM&&(e.file.bpm=a.BPM),a.pictures[0]&&(e.file.cover.medium=a.pictures[0].dataURL)}),this.started=!0;var a=new FormData;a.append("file[]",t),a.append("bpm",this.file.bpm);var s=new XMLHttpRequest;s.upload.onprogress=function(t){e.file.progress=l()(t.loaded/t.total*100)},s.onreadystatechange=function(t){if(4==t.target.readyState){var a="";try{a=JSON.parse(t.target.response)}catch(s){return Snackbar("We did something wrong. Try upload your beat again or open console for details"),console.log("Response:",t.target.response),void console.log(s)}a.error?Snackbar(a.error):void 0==a.id?(Snackbar("We did something wrong. Try upload your beat again or open console for details"),console.log("Response:",t.target.response)):(Snackbar("Your beat was successfully uploaded"),e.$route.meta.data=e.file,e.$router.push("/beats/"+a.id+"/edit"),e.file.id=a.id)}},s.open("post","http://api.beats.com/beats.new?token=1"),s.send(a)}}}),ft=_t,gt=(a("5c3d"),Object(p["a"])(ft,vt,ht,!1,null,null,null)),bt=gt.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("h4",[t._v("Seems like the page doesn't exist..")]),a("br"),a("router-link",{staticClass:"cool-button",attrs:{to:this.$route.meta.from}},[t._v("Go back")])],1)},kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[a("span",{staticClass:"material-icons"},[t._v("highlight_off")]),a("span",[t._v("Whoops..")])])}],Ct={},wt=Object(p["a"])(Ct,yt,kt,!1,null,null,null),St=wt.exports;s["a"].use(b["a"]);var xt=new b["a"]({base:"/",linkActiveClass:"active",linkExactActiveClass:"",routes:[{path:"/",component:B,meta:{title:"Главная"}},{path:"/auth",component:x,meta:{title:"Авторизация"}},{path:"/account/settings",component:ot,meta:{title:"Настройки"}},{path:"/beats/:page(\\d+)?",component:U,meta:{title:"beats"}},{path:"/beats/:id(\\d+)?/edit",component:et,meta:{title:"Редактирование"},beforeEnter:function(t,e,a){t.meta.data=e.meta.data,a()}},{path:"/upload",component:bt,meta:{title:"Загрузка бита"}},{path:"/dashboard",component:mt,meta:{title:"dashboard"}},{path:"/logout",beforeEnter:function(t,e,a){console.log(this),localStorage.removeItem("token"),location.href="/"}},{path:"*",component:St,beforeEnter:function(t,e,a){a(),t.meta.from=e.path},meta:{from:void 0,title:"Whoops.."}}]}),Tt=a("2f62");s["a"].use(Tt["a"]);var $t=new Tt["a"].Store({state:{user:{id:0,token:void 0,username:void 0,theme:"light"}}});a("6672");s["a"].config.productionTip=!1,window.authCallback=function(t){if(t.error)return alert(t.error.error_msg);vue.user.id=1,vue.user.logged=!0,vue.user.nickname=t.response[0].first_name+" "+t.response[0].last_name,vue.user.avatar=t.response[0].photo_big},window.vue=new s["a"]({router:xt,store:$t,data:{user:{id:0,logged:!1,access_token:"",username:"",nickname:""}},created:function(){if(localStorage.access_token){this.user.access_token=localStorage.access_token;var t=document.createElement("script");t.src="https://api.vk.com/method/users.get?fields=photo_big&access_token=".concat(this.user.access_token,"&lang=en&callback=authCallback&v=5.92"),document.getElementsByTagName("head")[0].appendChild(t),xt.replace("/")}else if(location.hash.includes("access_token")){var e=location.hash;this.user.access_token=e.slice("#access_token=".length+1,e.indexOf("&")),localStorage.access_token=this.user.access_token;var a=document.createElement("script");a.src="https://api.vk.com/method/users.get?fields=photo_big&access_token=".concat(this.user.access_token,"&lang=en&callback=authCallback&v=5.92"),document.getElementsByTagName("head")[0].appendChild(a),xt.replace("/")}document.title=xt.currentRoute.meta.title||"whoops..",document.body.style.opacity=1},render:function(t){return t(g)}}).$mount("#app"),xt.beforeEach(function(t,e,a){document.title=t.meta.title,a()})},"5c3d":function(t,e,a){"use strict";var s=a("0600"),r=a.n(s);r.a},"5de3":function(t,e,a){"use strict";var s=a("15a7"),r=a.n(s);r.a},6672:function(t,e,a){},"9c67":function(t,e,a){},c64d:function(t,e,a){},d572:function(t,e,a){"use strict";var s=a("9c67"),r=a.n(s);r.a},fad1:function(t,e,a){}});